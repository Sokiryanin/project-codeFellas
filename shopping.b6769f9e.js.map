{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,mTCAzD,I,EAAAC,EAAAJ,EAAA,S,aCAAK,EAAiB,IAAAC,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FC,EAAiB,IAAAN,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FE,EAAiB,IAAAP,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MH4C7E,SAAAG,IACb,MAAMC,EAAYC,EAAAC,KAAKC,oBAEjBC,EAAejB,KAAKC,MAAMiB,OAAOC,aAAaC,QAAQ,iBAE5D,GAAIH,GAAgBA,EAAavB,OAAS,EAAG,CAC3C,MAAM2B,EAASJ,EACZK,KAAI,EAAC3B,GAAEA,EAAE4B,OAAEA,EAAMC,MAAEA,EAAKC,MAAEA,EAAKC,YAAEA,EAAWC,SAAEA,EAAQC,MAAEA,KAChD,sCACmBjC,wEAGlB8B,gIAK0BD,qDACEG,uDACGD,uFAGHH,yEAEpBK,EAAM,GAAGpB,2EACNqB,EAAA1B,oGAGHyB,EAAM,GAAGpB,2EACNqB,EAAAnB,mMAK+Bf,iEACEkC,EAAAlB,SAAUhB,mDAK/DmC,KAAK,IAERjB,EAAUkB,UAAYV,C,KACjB,CACL,MAAMA,EAAS,6LAMLQ,EAAAG,sGAOVnB,EAAUkB,UAAY,GACtBjB,EAAAC,KAAKkB,kBAAkBC,mBAAmB,WAAYb,E,EItG1DW,EAAiB,IAAA5B,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WJO5F0B,iBACE,IACE,MAAMC,KAAEA,SAAelC,EAAAmC,QAAMC,IAC3B,uDAGIC,EAAIH,EAAK,GAAU,MACnBI,EAAIJ,EAAK,GAAU,MAInBK,EAFe,IAAIF,KAAMC,GAESE,QAAO,CAACC,EAAKC,KACnDD,EAAIE,KAAK,CACPlD,GAAIiD,EAAKE,IACTtB,MAAOoB,EAAKpB,MACZD,OAAQqB,EAAKrB,OACbE,MAAOmB,EAAiB,WACxBlB,YAAakB,EAAKlB,YAClBC,SAAUiB,EAAgB,UAC1BhB,MAAOgB,EAAgB,YAGlBD,IACN,IAEHzB,OAAOC,aAAa4B,QAClB,eACA/C,KAAKgD,UAAUP,G,CAEjB,MAAOQ,GACPC,QAAQC,IAAIF,E,EAIhBG,GAiEAxC,KK1GAE,EAAAhB,EAAA,UAGAiB,KAAKC,oBAAoBqC,iBAAiB,SAE1C,SAAoCC,GAClC,GAA8B,WAA1BA,EAAMC,OAAOC,UAAmD,QAA1BF,EAAMC,OAAOC,SAAoB,CACzE,MAAMvC,EAAejB,KAAKC,MACxBiB,OAAOC,aAAaC,QAAQ,iBAGxBqC,EAASH,EAAMC,OAAO5D,GAEtB+D,EAAkBzC,EAAa0C,QAAOC,GAAQA,EAAKjE,KAAO8D,IAEhEvC,OAAOC,aAAa4B,QAClB,eACA/C,KAAKgD,UAAUU,IAGjB9C,G","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-1aebc8a404063ced.js","src/js/addBooksInShoppingList.js","node_modules/@parcel/runtime-js/lib/runtime-b72456753751e934.js","node_modules/@parcel/runtime-js/lib/runtime-d73151a872e63687.js","node_modules/@parcel/runtime-js/lib/runtime-b461152ac458eeba.js","node_modules/@parcel/runtime-js/lib/runtime-76594953a040f04b.js","src/js/deleteBookFromShoppingList.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"3bDNW\\\":\\\"shopping.b6769f9e.js\\\",\\\"1yVwl\\\":\\\"amazon.ae124200.png\\\",\\\"bYYsk\\\":\\\"appleshop.78fce046.png\\\",\\\"fR7nE\\\":\\\"icon-trash.b5140548.svg\\\",\\\"gqSwi\\\":\\\"empty-shopping-list.9cc38e9e.png\\\",\\\"8JNnL\\\":\\\"index.c254ce6f.js\\\"}\"));","import axios from 'axios';\nimport { refs } from './refs';\nimport amazon from '../images/amazon.png';\nimport appleBooks from '../images/appleshop.png';\nimport svg from '../images/icon-trash.svg';\nimport booksImage from '../images/empty-shopping-list.png';\n\nasync function qwe() {\n  try {\n    const { data } = await axios.get(\n      'https://books-backend.p.goit.global/books/top-books'\n    );\n\n    const a = data[1]['books'];\n    const b = data[2]['books'];\n\n    const shoppingList = [...a, ...b];\n\n    const shoppingListToSave = shoppingList.reduce((acc, item) => {\n      acc.push({\n        id: item._id,\n        title: item.title,\n        author: item.author,\n        image: item['book_image'],\n        description: item.description,\n        category: item['list_name'],\n        links: item['buy_links'],\n      });\n\n      return acc;\n    }, []);\n\n    window.localStorage.setItem(\n      'shoppingList',\n      JSON.stringify(shoppingListToSave)\n    );\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nqwe();\n\n///////////////////////////////////////////\nexport default function addBooksInShoppingList() {\n  const booksList = refs.booksInShoppingList;\n\n  const shoppingList = JSON.parse(window.localStorage.getItem('shoppingList'));\n\n  if (shoppingList && shoppingList.length > 0) {\n    const markup = shoppingList\n      .map(({ id, author, title, image, description, category, links }) => {\n        return ` \n      <li class=\"books-card\" id=${id}>\n        <img\n          class=\"books-card__image\"\n          src=${image}\n          alt=\"book image\"\n        />\n\n        <div class=\"books-card__info\">\n          <h2 class=\"books-card__title\">${title}</h2>\n          <p class=\"books-card__category\">${category}</p>\n          <p class=\"books-card__description\">${description}</p>\n\n          <div class=\"wrapper\">\n            <p class=\"books-card__author\">${author}</p>\n            <div class=\"wrapper-links\">\n              <a href=${links[0].url} target=\"_blank\" class=\"books-card__link\">\n                <img src=${amazon} alt=\"Amazon\" class=\"books-card__image-amazon\" />\n              </a>\n\n              <a href=${links[1].url} target=\"_blank\" class=\"books-card__link\">\n                <img src=${appleBooks} alt=\"Apple books\" class=\"books-card__image-appleBooks\" />\n              </a>\n            </div>\n          </div>\n        </div>\n        <button type=\"button\" class=\"button__delete\" id=${id}>\n          <img class=\"button__icon\" alt=\"icon delete\" src=${svg} id=${id}></img>\n        </button>\n      </li>\n    `;\n      })\n      .join('');\n\n    booksList.innerHTML = markup;\n  } else {\n    const markup = `\n    <div class=\"empty-shoping-list\">\n      <p class=\"empty-shoping-list__text\">\n        This page is empty, add some books and proceed to order.\n      </p>\n      <img\n        src=${booksImage}\n        alt=\"Four books\"\n        class=\"empty-shoping-list__image\"\n      />\n    </div>\n    `;\n\n    booksList.innerHTML = '';\n    refs.titleShoppingList.insertAdjacentHTML('afterend', markup);\n  }\n}\n\naddBooksInShoppingList();\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1yVwl\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bYYsk\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"fR7nE\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"gqSwi\")).toString();","import { refs } from './refs';\nimport addBooksInShoppingList from './addBooksInShoppingList';\n\nrefs.booksInShoppingList.addEventListener('click', deleteBookFromShoppingList);\n\nfunction deleteBookFromShoppingList(event) {\n  if (event.target.nodeName === 'BUTTON' || event.target.nodeName === 'IMG') {\n    const shoppingList = JSON.parse(\n      window.localStorage.getItem('shoppingList')\n    );\n\n    const bookId = event.target.id;\n\n    const newShoppingList = shoppingList.filter(book => book.id !== bookId);\n\n    window.localStorage.setItem(\n      'shoppingList',\n      JSON.stringify(newShoppingList)\n    );\n\n    addBooksInShoppingList();\n  }\n}\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$2shzp","$41f4bfe0f5168ce2$exports","URL","resolve","import","meta","url","toString","$1fb24e0fd95bb9b9$exports","$1e480a1f72cdaad4$exports","$500b430e3eddcd26$export$2e2bcd8739ae039","booksList","$krGWQ","refs","booksInShoppingList","shoppingList","window","localStorage","getItem","markup","map","author","title","image","description","category","links","$parcel$interopDefault","join","innerHTML","$9b44af5edf8fd5e2$exports","titleShoppingList","insertAdjacentHTML","async","data","default","get","a","b","shoppingListToSave","reduce","acc","item","push","_id","setItem","stringify","error","console","log","$500b430e3eddcd26$var$qwe","addEventListener","event","target","nodeName","bookId","newShoppingList","filter","book"],"version":3,"file":"shopping.b6769f9e.js.map"}