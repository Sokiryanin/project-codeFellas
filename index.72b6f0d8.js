var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},o={},n=t.parcelRequired7c6;null==n&&((n=function(t){if(t in e)return e[t].exports;if(t in o){var n=o[t];delete o[t];var s={id:t,exports:{}};return e[t]=s,n.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){o[t]=e},t.parcelRequired7c6=n);var s=n("krGWQ"),i=n("2shzp");async function a(){return i.default.get("https://books-backend.p.goit.global/books/top-books").then((t=>t.data))}async function r(t){return i.default.get(`https://books-backend.p.goit.global/books/category?category=${t}`).then((t=>(console.log(t.data),t.data)))}async function l(t){return i.default.get(`https://books-backend.p.goit.global/books/${t}`).then((t=>t.data))}r("Advice How-To and Miscellaneous");let c=null;function d(){function t(){s.refs.modalWindow.classList.add("visually-hidden"),s.refs.body.classList.remove("locked"),s.refs.modalWindow.removeEventListener("click",e)}function e(e){e.target===s.refs.modalWindow&&t()}function o(e){"Escape"===e.code&&(t(),document.removeEventListener("keydown",o))}document.querySelectorAll(".category__item, .best-book__item").forEach((t=>{t.addEventListener("click",(()=>function(t){s.refs.modalAuthor.textContent="",s.refs.modalTitle.textContent="",s.refs.modalDescription.textContent="",s.refs.modalImage.setAttribute("src",""),s.refs.modalLinkAmazon.setAttribute("href",""),s.refs.modalLinkApple.setAttribute("href",""),s.refs.modalLinkShop.setAttribute("href","");l(t.dataset.id).then((t=>{console.log(t),function(t){const{author:e,title:o,description:n,book_image:i,buy_links:a,_id:r}=t;s.refs.modalAuthor.textContent=e,s.refs.modalTitle.textContent=o,s.refs.modalDescription.textContent=n,s.refs.modalImage.setAttribute("src",i),s.refs.modalLinkAmazon.setAttribute("href",a[0].url),s.refs.modalLinkApple.setAttribute("href",a[1].url),s.refs.modalLinkShop.setAttribute("href",a[4].url)}(t),function(t){const e=JSON.parse(localStorage.getItem("shoppingList"))||[];-1===e.findIndex((e=>e._id===t))?(s.refs.modalButton.textContent="Add to shopping list",s.refs.modalUserInfo.textContent=""):(s.refs.modalButton.textContent="Remove from the shopping list",s.refs.modalUserInfo.textContent='Congratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".')}(t._id),s.refs.modalWindow.classList.remove("visually-hidden"),s.refs.body.classList.add("locked"),s.refs.modalWindow.addEventListener("click",e),document.addEventListener("keydown",o),c=t})).catch((t=>{console.error("Error fetching book data:",t)}))}(t)))})),s.refs.modalCloseBtn.addEventListener("click",t)}s.refs.modalButton.addEventListener("click",(function(){if(!c)return;const t={author:s.refs.modalAuthor.textContent,title:s.refs.modalTitle.textContent,description:s.refs.modalDescription.textContent,book_image:s.refs.modalImage.getAttribute("src"),buy_links:[{url:s.refs.modalLinkAmazon.getAttribute("href")},{url:s.refs.modalLinkApple.getAttribute("href")},{url:s.refs.modalLinkShop.getAttribute("href")}],_id:c._id},e=JSON.parse(localStorage.getItem("shoppingList"))||[],o=e.findIndex((e=>e._id===t._id));"Add to shopping list"===s.refs.modalButton.textContent?(e.push(t),localStorage.setItem("shoppingList",JSON.stringify(e)),s.refs.modalButton.textContent="Remove from the shopping list",s.refs.modalUserInfo.textContent='Congratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".'):(e.splice(o,1),localStorage.setItem("shoppingList",JSON.stringify(e)),s.refs.modalButton.textContent="Add to shopping list",s.refs.modalUserInfo.textContent="")})),n("8BGGW");s=n("krGWQ");const u=(s=n("krGWQ")).refs.selectedCattegory;function f(t){r(t).then((t=>{var e;e=function(t){const e=`<h2 class="category__title">${p(t[0].list_name)}</h2>`,o=t.map((t=>`<li class="category__item" data-id="${t._id}">\n      <div class="category__item-wrap">\n        <div class="category__img-container">\n        <img class="category__item-img" src="${t.book_image} "/>\n        <p class="category__pop-up-text">\n                    quick view \n                  </p>\n        </div>\n        <p class="category__item-title">${t.title}</p>\n        <p class="category__item-author">${t.author}</p>\n        </li>`)).join("");return`<div class="select-category-cont">${e}<ul class="category__list">${o}</ul></div>`}(t),u.innerHTML=e,d()})).catch(console.log)}function p(t){const e=t.split(" "),o=e.length;let n="";if(o>1){for(let t=0;t<=o-2;t+=1)n+=" "+e[t];n+=` <span class=title__last-word>${e[o-1]}<span>`}else n=`<span class=title__last-word>${e[0]}<span>`;return n}function g(t){const{list_name:e,books:o}=t;return`<li class="best-category__item">${`<h3 class="best-category__item-title">${e}</h3>`}<ul class="best-book__list">${o.map((t=>` <li class="best-book__item" data-id="${t._id}">\n      <div class="best-book__wrap">\n    <div class="best-book__img-container">\n      <img class="best-book__img" src="${t.book_image}" alt="${t.title}"/>\n      <p class="book__pop-up-text">\n                quick view \n              </p>\n              </div>\n      <h3 class="best-book__title">${t.title}</h3>\n      <p class="best-book__author">${t.author}</p>\n      </div>\n    </li>\n    `)).join("")}</ul>${`<button class="seemore__btn" type="button" data-id="${e}">See more</button>`}</li>`}function m(){a().then((t=>{const e=`<div class=" best-category__container"><h2 class="best-category__title title-category__list">\n        ${p("Best Sellers Books")}</h2><ul class="best-category__list">${t.map(g).join("")}</ul></div>`;var o;o=e,s.refs.selectedCattegory.innerHTML=o,d()})).catch((t=>{console.log("Помилка при отриманні даних з сервера:",t)}))}m(),s.refs.selectedCattegory.addEventListener("click",(t=>{"BUTTON"===t.target.nodeName&&f(t.target.dataset.id)}));const _=(s=n("krGWQ")).refs.categoriesList;(async function(){return i.default.get("https://books-backend.p.goit.global/books/category-list").then((t=>t.data))})().then((t=>{_.insertAdjacentHTML("beforeend",t.map((({list_name:t})=>`\n    <li class="categories__item">\n         <a href="" class="categories__link categories__link-js"\n        ><span>${t}</span></span></spa></a>\n        </li>\n    `)).join(""))})),_.addEventListener("click",(function(t){if(t.preventDefault(),"SPAN"!==t.target.nodeName)return;document.querySelector(".current").classList.remove("current");const e=t.target;e.classList.add("current"),"All categories"===e.textContent?m():f(t.target.textContent)})),n("dTazW");
//# sourceMappingURL=index.72b6f0d8.js.map
